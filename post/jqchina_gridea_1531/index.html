<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    html5和jQuery动态饼状图表插件 | JQ下载中国
</title>
<link rel="shortcut icon" href="https://hao12306.github.io/favicon.ico?v=1569206027820">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://hao12306.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://hao12306.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://hao12306.github.io">
                <img class="avatar" src="https://hao12306.github.io/images/avatar.png?v=1569206027820" alt="">
            </a>
            <div class="site-title">
                <h1>
                    JQ下载中国
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            html5和jQuery动态饼状图表插件
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-09-20</time>
                            
                                <a href="https://hao12306.github.io/tag/IOKlJUjoy" class="post-tag i-tag
                            i-tag-primary">
                            #jquery
                        </a>
                                
                                <a href="https://hao12306.github.io/tag/bqrgZVBijT" class="post-tag i-tag
                            i-tag-other_2">
                            #html
                        </a>
                                
                        </div>
                        
                            <div class="post-feature-image" style="background-image: url('http://img.htmleaf.com/1411/201411191548.jpg')"></div>
                            
                                <div class="post-content">
                                    <h4 id="下载预览">下载预览</h4>
<p><a href="http://down.htmleaf.com/1411/201411191548.zip">文件下载</a> | <a href="http://www.htmleaf.com/Demo/20141119528.html">在线预览</a></p>
<h4 id="简介">简介：</h4>
<p>这是一款使用html5 canvas和jQuery制作的动态饼状图表插件。该图表插件可以通过鼠标查看每一饼块的所占比例大小，使用十分方便。</p>
<h4 id="内容">内容：</h4>
<article class="leaf-jian-yao">
<header>
<h4>简要教程</h4>
</header>
<div class="ct-post-content">
<p>在这个demo中将使用html5 canvas和jQuery来制作一个动态的饼状图表。</p>
<h3>HTML</h3>
<pre class="brush:html">
&lt;div id="container"&gt;
<p>&lt;div class=&quot;wideBox&quot;&gt;<br>
&lt;h1&gt;Widgets Sold in 2010&lt;/h1&gt;<br>
&lt;p&gt;Click a colour in the chart, or an item in the table, to pull out a slice! &lt;a href=&quot;#&quot;&gt;Back to Tutorial&lt;/a&gt;&lt;/p&gt;<br>
&lt;/div&gt;</p>
<p>&lt;canvas id=&quot;chart&quot; width=&quot;600&quot; height=&quot;500&quot;&gt;&lt;/canvas&gt;</p>
<p>&lt;table id=&quot;chartData&quot;&gt;</p>
<p>&lt;tr&gt;<br>
&lt;th&gt;Widget&lt;/th&gt;&lt;th&gt;Sales ($)&lt;/th&gt;<br>
&lt;/tr&gt;</p>
<p>&lt;tr style=&quot;color: #0DA068&quot;&gt;<br>
&lt;td&gt;SuperWidget&lt;/td&gt;&lt;td&gt;1862.12&lt;/td&gt;<br>
&lt;/tr&gt;</p>
<p>&lt;tr style=&quot;color: #194E9C&quot;&gt;<br>
&lt;td&gt;MegaWidget&lt;/td&gt;&lt;td&gt;1316.00&lt;/td&gt;<br>
&lt;/tr&gt;</p>
<p>&lt;tr style=&quot;color: #ED9C13&quot;&gt;<br>
&lt;td&gt;HyperWidget&lt;/td&gt;&lt;td&gt;712.49&lt;/td&gt;<br>
&lt;/tr&gt;</p>
<p>&lt;tr style=&quot;color: #ED5713&quot;&gt;<br>
&lt;td&gt;WonderWidget&lt;/td&gt;&lt;td&gt;3236.27&lt;/td&gt;<br>
&lt;/tr&gt;</p>
<p>&lt;tr style=&quot;color: #057249&quot;&gt;<br>
&lt;td&gt;MicroWidget&lt;/td&gt;&lt;td&gt;6122.06&lt;/td&gt;<br>
&lt;/tr&gt;</p>
<p>&lt;tr style=&quot;color: #5F91DC&quot;&gt;<br>
&lt;td&gt;NanoWidget&lt;/td&gt;&lt;td&gt;128.11&lt;/td&gt;<br>
&lt;/tr&gt;</p>
<p>&lt;tr style=&quot;color: #F88E5D&quot;&gt;<br>
&lt;td&gt;LovelyWidget&lt;/td&gt;&lt;td&gt;245.55&lt;/td&gt;<br>
&lt;/tr&gt;<br>
&lt;/table&gt;<br>
&lt;/div&gt;<br>
</pre></p>
<p>HTML结构非常简单，它包括：</p>
<ul>
<li>一个<code>container</code>作为包裹容器。</li>
<li>一个用于绘制饼状图的HTML5 canvas。</li>
<li>一个表格用于放置图表数据。</li>
</ul>
<h3>配置图表函数、参数和可用变量</h3>
<pre class="brush:js">
// Run the code when the DOM is ready
$( pieChart );
function pieChart() {
// Config settings
var chartSizePercent = 55;// The chart radius relative to the canvas width/height (in percent)
var sliceBorderWidth = 1; // Width (in pixels) of the border around each slice
var sliceBorderStyle = "#fff";// Colour of the border around each slice
var sliceGradientColour = "#ddd"; // Colour to use for one end of the chart gradient
var maxPullOutDistance = 25;// How far, in pixels, to pull slices out when clicked
var pullOutFrameStep = 4; // How many pixels to move a slice with each animation frame
var pullOutFrameInterval = 40;// How long (in ms) between each animation frame
var pullOutLabelPadding = 65; // Padding between pulled-out slice and its label
var pullOutLabelFont = "bold 16px 'Trebuchet MS', Verdana, sans-serif";// Pull-out slice label font
var pullOutValueFont = "bold 12px 'Trebuchet MS', Verdana, sans-serif";// Pull-out slice value font
var pullOutValuePrefix = "$"; // Pull-out slice value prefix
var pullOutShadowColour = "rgba( 0, 0, 0, .5 )";// Colour to use for the pull-out slice shadow
var pullOutShadowOffsetX = 5; // X-offset (in pixels) of the pull-out slice shadow
var pullOutShadowOffsetY = 5; // Y-offset (in pixels) of the pull-out slice shadow
var pullOutShadowBlur = 5;// How much to blur the pull-out slice shadow
var pullOutBorderWidth = 2; // Width (in pixels) of the pull-out slice border
var pullOutBorderStyle = "#333";// Colour of the pull-out slice border
var chartStartAngle = -.5 * Math.PI;// Start the chart at 12 o'clock instead of 3 o'clock
// Declare some variables for the chart
var canvas; // The canvas element in the page
var currentPullOutSlice = -1; // The slice currently pulled out (-1 = no slice)
var currentPullOutDistance = 0; // How many pixels the pulled-out slice is currently pulled out in the animation
var animationId = 0;// Tracks the interval ID for the animation created by setInterval()
var chartData = []; // Chart data (labels, values, and angles)
var chartColours = [];// Chart colours (pulled from the HTML table)
var totalValue = 0; // Total of all the values in the chart
var canvasWidth;// Width of the canvas, in pixels
var canvasHeight; // Height of the canvas, in pixels
var centreX;// X-coordinate of centre of the canvas/chart
var centreY;// Y-coordinate of centre of the canvas/chart
var chartRadius;// Radius of the pie chart, in pixels
// Set things up and draw the chart
init();
</pre>
<h3>初始化图表</h3>
<pre class="brush:js">
/**
 * Set up the chart data and colours, as well as the chart and table click handlers,
 * and draw the initial pie chart
 */
<p>function init() {</p>
<p>// Get the canvas element in the page<br>
canvas = document.getElementById('chart');</p>
<p>// Exit if the browser isn't canvas-capable<br>
if ( typeof canvas.getContext === 'undefined' ) return;</p>
<p>// Initialise some properties of the canvas and chart<br>
canvasWidth = canvas.width;<br>
canvasHeight = canvas.height;<br>
centreX = canvasWidth / 2;<br>
centreY = canvasHeight / 2;<br>
chartRadius = Math.min( canvasWidth, canvasHeight ) / 2 * ( chartSizePercent / 100 );</p>
<p>// Grab the data from the table,<br>
// and assign click handlers to the table data cells</p>
<p>var currentRow = -1;<br>
var currentCell = 0;</p>
<p>$('#chartData td').each( function() {<br>
currentCell++;<br>
if ( currentCell % 2 != 0 ) {<br>
currentRow++;<br>
chartData[currentRow] = [];<br>
chartData[currentRow]['label'] = <span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;}&#039; at position 16: (this).text();
}̲ else {
 var va…'>(this).text();
} else {
 var value = parseFloat(</span>(this).text());<br>
totalValue += value;<br>
value = value.toFixed(2);<br>
chartData[currentRow]['value'] = value;<br>
}</p>
<p>// Store the slice index in this cell, and attach a click handler to it<br>
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mo>)</mo><mi mathvariant="normal">.</mi><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><msup><mo>(</mo><mo mathvariant="normal">′</mo></msup><mi>s</mi><mi>l</mi><mi>i</mi><mi>c</mi><msup><mi>e</mi><mo mathvariant="normal">′</mo></msup><mo separator="true">,</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>R</mi><mi>o</mi><mi>w</mi><mo>)</mo><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex">(this).data( &#x27;slice&#x27;, currentRow );
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mclose">)</span><span class="mord">.</span><span class="mord mathdefault">d</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mopen"><span class="mopen">(</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">c</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mpunct">;</span></span></span></span>(this).click( handleTableClick );</p>
<p>// Extract and store the cell colour<br>
if ( rgb = $(this).css('color').match( /rgb((\d+), (\d+), (\d+)/) ) {<br>
chartColours[currentRow] = [ rgb[1], rgb[2], rgb[3] ];<br>
} else if ( hex = $(this).css('color').match(/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/) ) {<br>
chartColours[currentRow] = [ parseInt(hex[1],16) ,parseInt(hex[2],16), parseInt(hex[3], 16) ];<br>
} else {<br>
alert( &quot;Error: Colour could not be determined! Please specify table colours using the format '#xxxxxx'&quot; );<br>
return;<br>
}</p>
<p>} );</p>
<p>// Now compute and store the start and end angles of each slice in the chart data</p>
<p>var currentPos = 0; // The current position of the slice in the pie (from 0 to 1)</p>
<p>for ( var slice in chartData ) {<br>
chartData[slice]['startAngle'] = 2 * Math.PI * currentPos;<br>
chartData[slice]['endAngle'] = 2 * Math.PI * ( currentPos + ( chartData[slice]['value'] / totalValue ) );<br>
currentPos += chartData[slice]['value'] / totalValue;<br>
}</p>
<p>// All ready! Now draw the pie chart, and add the click handler to it<br>
drawChart();<br>
$('#chart').click ( handleChartClick );<br>
}<br>
</pre></p>
<p>更多详细信息请查看：<a href="http://www.elated.com/articles/snazzy-animated-pie-chart-html5-jquery/" target="\_blank">http://www.elated.com/articles/snazzy-animated-pie-chart-html5-jquery/</a></p>
</div>
</article>
<h4 id="下载预览-2">下载预览</h4>
<p><a href="http://down.htmleaf.com/1411/201411191548.zip">文件下载</a> | <a href="http://www.htmleaf.com/Demo/20141119528.html">在线预览</a></p>

                                </div>
                    </article>
                    <!--  -->
                    
                        <div class="next-post">
                            <div class="next">下一篇</div>
                            <a href="https://hao12306.github.io/post/jqchina_gridea_1532">
                                <h3 class="post-title">
                                    纯css3视觉差滚动幻灯片效果
                                </h3>
                            </a>
                        </div>
                        
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E4%B8%8B%E8%BD%BD%E9%A2%84%E8%A7%88">下载预览</a></li>
<li><a href="#%E7%AE%80%E4%BB%8B">简介：</a></li>
<li><a href="#%E5%86%85%E5%AE%B9">内容：</a></li>
<li><a href="#%E4%B8%8B%E8%BD%BD%E9%A2%84%E8%A7%88-2">下载预览</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*获取文章目录集合,可通过:header过滤器*/
                var alis = $('.post-content :header');
                /*获取侧边栏目录列表集合**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*获取滚动条到顶部的距离*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*获取锚点集合中的元素分别到顶点的距离*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*高亮显示*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*绑定滚动事件 */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="http://www.sjzlx.top/" target="_blank">PHP编程中国</a> | 
  <a class="rss" href="https://hao12306.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>
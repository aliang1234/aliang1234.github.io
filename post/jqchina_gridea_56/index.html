<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    基于滚动的超酷js图片动画特效 | JQ下载中国
</title>
<link rel="shortcut icon" href="https://hao12306.github.io/favicon.ico?v=1569206027820">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://hao12306.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://hao12306.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://hao12306.github.io">
                <img class="avatar" src="https://hao12306.github.io/images/avatar.png?v=1569206027820" alt="">
            </a>
            <div class="site-title">
                <h1>
                    JQ下载中国
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            基于滚动的超酷js图片动画特效
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-09-20</time>
                            
                                <a href="https://hao12306.github.io/tag/bNF36zwcF" class="post-tag i-tag
                            i-tag-primary">
                            #js
                        </a>
                                
                        </div>
                        
                            <div class="post-feature-image" style="background-image: url('http://img.htmleaf.com/1907/201907096935.jpg')"></div>
                            
                                <div class="post-content">
                                    <h4 id="下载预览">下载预览</h4>
<p><a href="http://down.htmleaf.com/1907/201907096935.zip">文件下载</a> | <a href="http://www.htmleaf.com/Demo/201907095727.html">在线预览</a></p>
<h4 id="简介">简介：</h4>
<p>这是一款基于滚动的超酷js图片动画特效。该特效在使用鼠标滚动屏幕时，根据屏幕的当前位置，屏幕上的图片做出相应的动画效果，非常炫酷。</p>
<h4 id="内容">内容：</h4>
<article class="leaf-jian-yao">
<header>
<h5>简要教程</h5>
</header>
<div class="ct-post-content">
<p>这是一款基于滚动的超酷js图片动画特效。该特效在使用鼠标滚动屏幕时，根据屏幕的当前位置，屏幕上的图片做出相应的动画效果，非常炫酷。</p>
<h3>
<span class="glyphicon glyphicon-edit"></span> 使用方法</h3>
<h5>
<span class="glyphicon glyphicon-paperclip"></span> HTML结构</h5>
<pre class="brush:html">
&lt;div class="container"&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;div class="image"&gt;&lt;/div&gt;
&lt;/div&gt;
</pre>
<h5>
<span class="glyphicon glyphicon-paperclip"></span> CSS样式</h5>
<pre class="brush:css">
// The container for all images
.container {
// 2 columns grid
display: grid;
grid-template-columns: 1fr 1fr;
grid-gap: 0 10\%;
justify-items: end; // This will align all items (images) to the right
<p>// Fixed positioned, so it won't be affected by default scroll<br>
// It will be moved using <code>transform</code>, to achieve a custom scroll behavior<br>
position: fixed;<br>
top: 0;<br>
left: 0;<br>
width: 100%;<br>
}<br>
// Styles for image elements<br>
// Mainly positioning and background styles<br>
.image {<br>
position: relative;<br>
width: 300px;<br>
height: 100vh;<br>
background-repeat: no-repeat;<br>
background-position: center;</p>
<p>// This will align all even images to the left<br>
// For getting centered positioned images, respect to the viewport<br>
&amp;:nth-child(2n) {<br>
justify-self: start;<br>
}</p>
<p>// Set each <code>background-image</code> using a SCSS <code>for</code> loop<br>
@for <span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;&amp;&#039; at position 23: …1 through 10 {
&amp;̲amp;:nth-child(…'>i from 1 through 10 {
&amp;amp;:nth-child(#{</span>i}) {<br>
background-image: url('../img/image#{$i}.jpg');<br>
}<br>
}<br>
}<br>
// Adjusting layout for small screens<br>
@media screen and (max-width: 760px) {<br>
.container {<br>
// 1 column grid<br>
grid-template-columns: 1fr;<br>
// Fix image centering<br>
justify-items: center;<br>
}</p>
<p>// Fix image centering<br>
.image:nth-child(2n) {<br>
justify-self: center;<br>
}<br>
}<br>
</pre></p>
<h5>
<span class="glyphicon glyphicon-paperclip"></span> javascript</h5>
<pre class="brush:js">
// Easing function used for `translateX` animation
// From: https://gist.github.com/gre/1650294
function easeOutQuad (t) {
return t *\_ (2 - t)
}
<p>// Returns a random number (integer) between __<code>min</code>__ and __<code>max</code>__<br>
function random (min, max) {<br>
return Math.floor(Math.random() * (max - min + 1)) + min_<br>
}</p>
<p>// Returns a random number as well, but it could be negative also<br>
function randomPositiveOrNegative (min, max) {<br>
return random(min, max) * (Math.random() &gt; 0.5 ? 1 : -1)<br>
}</p>
<p>// Set CSS <code>tranform</code> property for an element<br>
function setTransform (el, transform) {<br>
el.style.transform = transform<br>
el.style.WebkitTransform = transform<br>
}<br>
// Current scroll position<br>
var current = 0<br>
// Target scroll position<br>
var target = 0<br>
// Ease or speed for moving from <code>current</code> to <code>target</code><br>
var ease = 0.075<br>
// Utility variables for <code>requestAnimationFrame</code><br>
var rafId = undefined<br>
var rafActive = false<br>
// Container element<br>
var container = document.querySelector('.container')<br>
// Array with <code>.image</code> elements<br>
var images = Array.prototype.slice.call(document.querySelectorAll('.image'))<br>
// Variables for storing dimmensions<br>
var windowWidth, containerHeight, imageHeight</p>
<p>// Variables for specifying transform parameters (max limits)<br>
var rotateXMaxList = []<br>
var rotateYMaxList = []<br>
var translateXMax = -200</p>
<p>// Popullating the <code>rotateXMaxList</code> and <code>rotateYMaxList</code> with random values<br>
images.forEach(function () {<br>
rotateXMaxList.push(randomPositiveOrNegative(20, 40))<br>
rotateYMaxList.push(randomPositiveOrNegative(20, 60))<br>
})<br>
// The <code>fakeScroll</code> is an element to make the page scrollable<br>
// Here we are creating it and appending it to the <code>body</code><br>
var fakeScroll = document.createElement('div')<br>
fakeScroll.className = 'fake-scroll'<br>
document.body.appendChild(fakeScroll)<br>
// In the <code>setupAnimation</code> function (below) we will set the <code>height</code> properly<br>
// The styles for a <code>div</code> element (inserted with Javascript)<br>
// Used to make the page scrollable<br>
// Will be setted a proper <code>height</code> value using Javascript<br>
.fake-scroll {<br>
position: absolute;<br>
top: 0;<br>
width: 1px;<br>
}<br>
// Geeting dimmensions and setting up all for animation<br>
function setupAnimation () {<br>
// Updating dimmensions<br>
windowWidth = window.innerWidth<br>
containerHeight = container.getBoundingClientRect().height<br>
imageHeight = containerHeight / (windowWidth &gt; 760 ? images.length / 2 : images.length)<br>
// Set <code>height</code> for the fake scroll element<br>
fakeScroll.style.height = containerHeight + 'px'<br>
// Start the animation, if it is not running already<br>
startAnimation()<br>
}<br>
// Update scroll <code>target</code>, and start the animation if it is not running already<br>
function updateScroll () {<br>
target = window.scrollY || window.pageYOffset<br>
startAnimation()<br>
}</p>
<p>// Listen for <code>scroll</code> event to update <code>target</code> scroll position<br>
window.addEventListener('scroll', updateScroll)<br>
// Start the animation, if it is not running already<br>
function startAnimation () {<br>
if (!rafActive) {<br>
rafActive = true<br>
rafId = requestAnimationFrame(updateAnimation)<br>
}<br>
}<br>
// Do calculations and apply CSS <code>transform</code>s accordingly<br>
function updateAnimation () {<br>
// Difference between <code>target</code> and <code>current</code> scroll position<br>
var diff = target - current<br>
// <code>delta</code> is the value for adding to the <code>current</code> scroll position<br>
// If <code>diff &amp;lt; 0.1</code>, make <code>delta = 0</code>, so the animation would not be endless<br>
var delta = Math.abs(diff) &lt; 0.1 ? 0 : diff * ease</p>
<p>if (delta) { // If <code>delta !== 0</code><br>
// Update <code>current</code> scroll position<br>
current += delta<br>
// Round value for better performance<br>
current = parseFloat(current.toFixed(2))<br>
// Call <code>update</code> again, using <code>requestAnimationFrame</code><br>
rafId = requestAnimationFrame(updateAnimation)<br>
} else { // If <code>delta === 0</code><br>
// Update <code>current</code>, and finish the animation loop<br>
current = target<br>
rafActive = false<br>
cancelAnimationFrame(rafId)<br>
}</p>
<p>// Update images (explained below)<br>
updateAnimationImages()</p>
<p>// Set the CSS <code>transform</code> corresponding to the custom scroll effect<br>
setTransform(container, 'translateY('+ -current +'px)')<br>
}<br>
// Calculate the CSS <code>transform</code> values for each <code>image</code>, given the <code>current</code> scroll position<br>
function updateAnimationImages () {<br>
// This value is the <code>ratio</code> between <code>current</code> scroll position and images <code>height</code><br>
var ratio = current / imageHeight<br>
// Some variables for using in the loop<br>
var intersectionRatioIndex, intersectionRatioValue, intersectionRatio<br>
var rotateX, rotateXMax, rotateY, rotateYMax, translateX</p>
<p>// For each <code>image</code> element, make calculations and set CSS <code>transform</code> accordingly<br>
images.forEach(function (image, index) {<br>
// Calculating the <code>intersectionRatio</code>, similar to the value provided by<br>
// the IntersectionObserver API<br>
intersectionRatioIndex = windowWidth &gt; 760 ? parseInt(index / 2) : index<br>
intersectionRatioValue = ratio - intersectionRatioIndex<br>
intersectionRatio = Math.max(0, 1 - Math.abs(intersectionRatioValue))<br>
// Calculate the <code>rotateX</code> value for the current <code>image</code><br>
rotateXMax = rotateXMaxList[index]<br>
rotateX = rotateXMax - (rotateXMax _ intersectionRatio)<br>
rotateX = rotateX.toFixed(2)<br>
// Calculate the _<code>rotateY</code>_ value for the current _<code>image</code>_<br>
rotateYMax = rotateYMaxList_[_index]<br>
rotateY = rotateYMax - (rotateYMax _ intersectionRatio)<br>
rotateY = rotateY.toFixed(2)<br>
// Calculate the <code>translateX</code> value for the current <code>image</code><br>
if (windowWidth &gt; 760) {<br>
translateX = translateXMax - (translateXMax * easeOutQuad(intersectionRatio))<br>
translateX = translateX.toFixed(2)<br>
} else {<br>
translateX = 0<br>
}<br>
// Invert <code>rotateX</code> and <code>rotateY</code> values in case the image is below the center of the viewport<br>
// Also update <code>translateX</code> value, to achieve an alternating effect<br>
if (intersectionRatioValue &lt; 0) {<br>
rotateX = -rotateX<br>
rotateY = -rotateY<br>
translateX = index % 2 ? -translateX : 0<br>
} else {<br>
translateX = index % 2 ? 0 : translateX<br>
}<br>
// Set the CSS <code>transform</code>, using calculated values<br>
setTransform(image, 'perspective(500px) translateX('+ translateX +'px) rotateX('+ rotateX +'deg) rotateY('+ rotateY +'deg)')<br>
})<br>
}<br>
// Listen for <code>resize</code> event to recalculate dimmensions<br>
window.addEventListener('resize', setupAnimation)</p>
<p>// Initial setup<br>
setupAnimation()<br>
</pre></p>
<p><i class="fa fa-github"></i> 该基于滚动的超酷js图片动画特效的github网址为：<a href="https://github.com/lmgonzalves/scroll-based-animation" target="\_blank">https://github.com/lmgonzalves/scroll-based-animation</a></p>
</div>
</article>
<h4 id="下载预览-2">下载预览</h4>
<p><a href="http://down.htmleaf.com/1907/201907096935.zip">文件下载</a> | <a href="http://www.htmleaf.com/Demo/201907095727.html">在线预览</a></p>

                                </div>
                    </article>
                    <!--  -->
                    
                        <div class="next-post">
                            <div class="next">下一篇</div>
                            <a href="https://hao12306.github.io/post/jqchina_gridea_560">
                                <h3 class="post-title">
                                    纯js跨浏览器响应式消息通知插件
                                </h3>
                            </a>
                        </div>
                        
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E4%B8%8B%E8%BD%BD%E9%A2%84%E8%A7%88">下载预览</a></li>
<li><a href="#%E7%AE%80%E4%BB%8B">简介：</a></li>
<li><a href="#%E5%86%85%E5%AE%B9">内容：</a></li>
<li><a href="#%E4%B8%8B%E8%BD%BD%E9%A2%84%E8%A7%88-2">下载预览</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*获取文章目录集合,可通过:header过滤器*/
                var alis = $('.post-content :header');
                /*获取侧边栏目录列表集合**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*获取滚动条到顶部的距离*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*获取锚点集合中的元素分别到顶点的距离*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*高亮显示*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*绑定滚动事件 */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="http://www.sjzlx.top/" target="_blank">PHP编程中国</a> | 
  <a class="rss" href="https://hao12306.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>